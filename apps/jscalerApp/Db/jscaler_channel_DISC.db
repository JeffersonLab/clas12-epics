

############################################################
# set thresholds:
record(ao, "B_HW_$(CrName)_Sl$(Sl)_Ch$(Ch):tTrgSet") {
    field(DTYP,"JLAB_SCALERS")
    field(DESC,"scaler threshold TRG")
    field(OUT,"#C$(CScode) S$(ThreshTRG)")
    alias("B_DET_$(Det)_$(Sys)_$(Element):tTrgSet")
}
record(ao, "B_HW_$(CrName)_Sl$(Sl)_Ch$(Ch):tTdcSet") {
    field(DTYP,"JLAB_SCALERS")
    field(DESC,"scaler threshold TDC")
    field(OUT,"#C$(CScode) S$(ThreshTDC)")
    alias("B_DET_$(Det)_$(Sys)_$(Element):tTdcSet")
}

############################################################
# read thresholds:
record(ai, "B_HW_$(CrName)_Sl$(Sl)_Ch$(Ch):tTrg") {
    field(DTYP,"JLAB_SCALERS")
    field(DESC,"scaler threshold TRG")
    field(INP,"#C$(CScode) S$(ThreshTRG)")
    field(SCAN,"2 second")
    alias("B_DET_$(Det)_$(Sys)_$(Element):tTrg")
}
record(ai, "B_HW_$(CrName)_Sl$(Sl)_Ch$(Ch):tTdc") {
    field(DTYP,"JLAB_SCALERS")
    field(DESC,"scaler threshold TDC")
    field(INP,"#C$(CScode) S$(ThreshTDC)")
    field(SCAN,"2 second")
    alias("B_DET_$(Det)_$(Sys)_$(Element):tTdc")
}

############################################################
# read scalers:
record(waveform, "B_HW_$(CrName)_Sl$(Sl)_Ch$(Ch)") {
    field(DTYP,"JLAB_SCALERS") 
    field(DESC,"scaler waveform") 
    field(INP,"#C$(CScode) S$(Counts)") 
    field(NELM,"4")  
    field(FTVL,"DOUBLE")  
    field(SCAN,"2 second") 
    field(FLNK,"B_HW_$(CrName)_Sl$(Sl)_Ch$(Ch):cfanout")
    alias("B_DET_$(Det)_$(Sys)_$(Element)")
}
record(fanout,"B_HW_$(CrName)_Sl$(Sl)_Ch$(Ch):cfanout") {
    field(LNK1,"B_HW_$(CrName)_Sl$(Sl)_Ch$(Ch):cTrgG")
    field(LNK2,"B_HW_$(CrName)_Sl$(Sl)_Ch$(Ch):cTdcG")
    field(LNK3,"B_HW_$(CrName)_Sl$(Sl)_Ch$(Ch):cTrg")
    field(LNK4,"B_HW_$(CrName)_Sl$(Sl)_Ch$(Ch):cTdc")
}
record(subArray, "B_HW_$(CrName)_Sl$(Sl)_Ch$(Ch):cTrgG") {
    field(DESC,"TRG Gated")
    field(DTYP,"Soft Channel")
    field(INP,"B_HW_$(CrName)_Sl$(Sl)_Ch$(Ch).VAL")
    field(NELM,1)
    field(MALM,4)
    field(INDX,0)
    field(FTVL,"DOUBLE")
    alias("B_DET_$(Det)_$(Sys)_$(Element):c1")
    alias("B_DET_$(Det)_$(Sys)_$(Element):cTrgG")
}
record(subArray, "B_HW_$(CrName)_Sl$(Sl)_Ch$(Ch):cTdcG") {
    field(DESC,"TDC Gated")
    field(DTYP,"Soft Channel")
    field(INP,"B_HW_$(CrName)_Sl$(Sl)_Ch$(Ch).VAL")
    field(NELM,1)
    field(MALM,4)
    field(INDX,1)
    field(FTVL,"DOUBLE")
    alias("B_DET_$(Det)_$(Sys)_$(Element):c2")
    alias("B_DET_$(Det)_$(Sys)_$(Element):cTdcG")
}
record(subArray, "B_HW_$(CrName)_Sl$(Sl)_Ch$(Ch):cTrg") {
    field(DESC,"TRG")
    field(DTYP,"Soft Channel")
    field(INP,"B_HW_$(CrName)_Sl$(Sl)_Ch$(Ch).VAL")
    field(NELM,1)
    field(MALM,4)
    field(INDX,2)
    field(FTVL,"DOUBLE")
    alias("B_DET_$(Det)_$(Sys)_$(Element):c3")
    alias("B_DET_$(Det)_$(Sys)_$(Element):cTrg")
}
record(subArray, "B_HW_$(CrName)_Sl$(Sl)_Ch$(Ch):cTdc") {
    field(DESC,"TDC")
    field(DTYP,"Soft Channel")
    field(INP,"B_HW_$(CrName)_Sl$(Sl)_Ch$(Ch).VAL")
    field(NELM,1)
    field(MALM,4)
    field(INDX,3)
    field(FTVL,"DOUBLE")
    alias("B_DET_$(Det)_$(Sys)_$(Element):c4")
    alias("B_DET_$(Det)_$(Sys)_$(Element):cTdc")
}


