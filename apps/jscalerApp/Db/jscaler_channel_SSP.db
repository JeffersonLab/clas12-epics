
########################################################################
# all scalers from one fiber:
record(waveform, "B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch):scalers") {
    field(DTYP,"JLAB_SCALERS")
    field(DESC,"SSP scaler waveform")
    field(INP,"#C$(CScode) S$(Counts)")
    field(NELM,"192")
    field(FTVL,"DOUBLE")
    field(SCAN,"2 second")
    field(FLNK,"B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT0:scalers")
}
# all data from one fiber (we're deprecating this):
record(waveform, "B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch):data") {
    field(DTYP,"JLAB_SCALERS")
    field(DESC,"SSP data waveform")
    field(INP,"#C$(CScode) S$(Data)")
    field(NELM,"9")
    field(FTVL,"DOUBLE")
    field(SCAN,"2 second")
}

# individual temperatures and voltages (todo: replace temp#/volt# suffix with proper name):
record(ai, "B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch):temp:fpga") {
    field(DTYP,"JLAB_SCALERS")
    field(INP,"#C$(CScode) S$(Temp1)")
    field(SCAN,"2 second")
    field(EGU,"C")
    field(EGUL,0)
    field(ESLO,0.001)
    field(PREC,2)
    field(LINR,"LINEAR")
}
record(ai, "B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch):temp:reg0") {
    field(DTYP,"JLAB_SCALERS")
    field(INP,"#C$(CScode) S$(Temp2)")
    field(SCAN,"2 second")
    field(EGU,"C")
    field(EGUL,0)
    field(ESLO,0.001)
    field(LINR,"LINEAR")
}
record(ai, "B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch):temp:reg1") {
    field(DTYP,"JLAB_SCALERS")
    field(INP,"#C$(CScode) S$(Temp3)")
    field(SCAN,"2 second")
    field(EGU,"C")
    field(EGUL,0)
    field(ESLO,0.001)
    field(PREC,2)
    field(LINR,"LINEAR")
}
record(ai, "B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch):volt:pcb5") {
    field(DTYP,"JLAB_SCALERS")
    field(INP,"#C$(CScode) S$(Volt1)")
    field(SCAN,"2 second")
    field(EGU,"V")
    field(EGUL,0)
    field(ESLO,0.001)
    field(PREC,3)
    field(LINR,"LINEAR")
}
record(ai, "B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch):volt:pcb3_3") {
    field(DTYP,"JLAB_SCALERS")
    field(INP,"#C$(CScode) S$(Volt2)")
    field(SCAN,"2 second")
    field(EGU,"V")
    field(EGUL,0)
    field(ESLO,0.001)
    field(PREC,3)
    field(LINR,"LINEAR")
}
record(ai, "B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch):volt:int1") {
    field(DTYP,"JLAB_SCALERS")
    field(INP,"#C$(CScode) S$(Volt3)")
    field(SCAN,"2 second")
    field(EGU,"V")
    field(EGUL,0)
    field(ESLO,0.001)
    field(PREC,3)
    field(LINR,"LINEAR")
}
record(ai, "B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch):volt:aux1_8") {
    field(DTYP,"JLAB_SCALERS")
    field(INP,"#C$(CScode) S$(Volt4)")
    field(SCAN,"2 second")
    field(EGU,"V")
    field(EGUL,0)
    field(ESLO,0.001)
    field(PREC,3)
    field(LINR,"LINEAR")
}
record(ai, "B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch):volt:mgt1") {
    field(DTYP,"JLAB_SCALERS")
    field(INP,"#C$(CScode) S$(Volt5)")
    field(SCAN,"2 second")
    field(EGU,"V")
    field(EGUL,0)
    field(ESLO,0.001)
    field(PREC,3)
    field(LINR,"LINEAR")
}
record(ai, "B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch):volt:mgt1_2") {
    field(DTYP,"JLAB_SCALERS")
    field(INP,"#C$(CScode) S$(Volt6)")
    field(SCAN,"2 second")
    field(EGU,"V")
    field(EGUL,0)
    field(ESLO,0.001)
    field(PREC,3)
    field(LINR,"LINEAR")
}

########################################################################
# single-PMT scalers:
record(subArray, "B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT0:scalers") {
    field(INP,"B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch):scalers")
    field(NELM,64)
    field(MALM,64)
    field(INDX,0)
    field(FTVL,"DOUBLE")
    field(FLNK,"B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT1:scalers")
}
record(subArray, "B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT1:scalers") {
    field(INP,"B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch):scalers")
    field(NELM,64)
    field(MALM,128)
    field(INDX,64)
    field(FTVL,"DOUBLE")
    field(FLNK,"B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT2:scalers")
}
record(subArray, "B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT2:scalers") {
    field(INP,"B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch):scalers")
    field(NELM,64)
    field(MALM,192)
    field(INDX,128)
    field(FTVL,"DOUBLE")
    field(FLNK,"B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT0:scalersAvgC")
}

########################################################################
# single-PMT scaler averages:
record(compress, "B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT0:scalersAvgC") {
    field(INP,"B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT0:scalers")
    field(ALG,"N to 1 Average")
    field(NSAM,1)
    field(N,64)
    field(PREC,1)
    field(FLNK,"B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT1:scalersAvgC")
    alias("B_DET_$(Det)_$(Sys)_$(Element)_PMT0:scalersAvgC")
}
record(compress, "B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT1:scalersAvgC") {
    field(INP,"B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT1:scalers")
    field(ALG,"N to 1 Average")
    field(NSAM,1)
    field(N,64)
    field(PREC,1)
    field(FLNK,"B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT2:scalersAvgC")
}
record(compress, "B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT2:scalersAvgC") {
    field(INP,"B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT2:scalers")
    field(ALG,"N to 1 Average")
    field(NSAM,1)
    field(N,64)
    field(PREC,1)
}
record(ao, "B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT0:scalersAvg") {
    field(OMSL,"closed_loop")
    field(DOL,"B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT0:scalersAvgC CPP NMS")
    info(autosaveFields_pass0,"HHSV HIHI")
}
record(ao, "B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT1:scalersAvg") {
    field(OMSL,"closed_loop")
    field(DOL,"B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT1:scalersAvgC CPP NMS")
    info(autosaveFields_pass0,"HHSV HIHI")
}
record(ao, "B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT2:scalersAvg") {
    field(OMSL,"closed_loop")
    field(DOL,"B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT2:scalersAvgC CPP NMS")
    info(autosaveFields_pass0,"HHSV HIHI")
}
record(ai, "B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT0:scalersAvgK") {
    field(DTYP,"Raw Soft Channel")
    field(INP,"B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT0:scalersAvgC CPP NMS")
    info(autosaveFields_pass0,"HHSV HIHI")
    field(EGUL,0)
    field(ESLO,0.001)
    field(PREC,2)
    field(LINR,"LINEAR")
    field(EGU,"kHz")
}
record(ai, "B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT1:scalersAvgK") {
    field(DTYP,"Raw Soft Channel")
    field(INP,"B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT1:scalersAvgC CPP NMS")
    info(autosaveFields_pass0,"HHSV HIHI")
    field(EGUL,0)
    field(ESLO,0.001)
    field(PREC,2)
    field(LINR,"LINEAR")
    field(EGU,"kHz")
}
record(ai, "B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT2:scalersAvgK") {
    field(DTYP,"Raw Soft Channel")
    field(INP,"B_HW_$(CrName)_Sl$(Sl)_Fi$(Ch)_PMT2:scalersAvgC CPP NMS")
    info(autosaveFields_pass0,"HHSV HIHI")
    field(EGUL,0)
    field(ESLO,0.001)
    field(PREC,2)
    field(LINR,"LINEAR")
    field(EGU,"kHz")
}


