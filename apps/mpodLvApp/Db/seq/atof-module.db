
record(seq,"B_DET_ATOF_M$(M):$(S)") {
    field(LNK1,"B_DET_ATOF_HV_M$(M)_B:switch PP")
    field(LNK2,"B_DET_ATOF_HV_M$(M)_W:switch PP")
    field(LNK3,"B_DET_ATOF_LV_M$(M)_2V:switch PP")
    field(LNK4,"B_DET_ATOF_LV_M$(M)_4V:switch PP")
    field(DOL1,"$(VAL)")
    field(DOL2,"$(VAL)")
    field(DOL3,"$(VAL)")
    field(DOL4,"$(VAL)")
}

record(calc,"B_DET_ATOF_M$(M):isOn")
{
    field(SCAN,"1 second")
    field(INPA,"B_DET_ATOF_HV_M$(M)_B:stat")
    field(INPB,"B_DET_ATOF_HV_M$(M)_W:stat")
    field(INPC,"B_DET_ATOF_LV_M$(M)_2V:stat")
    field(INPD,"B_DET_ATOF_LV_M$(M)_4V:stat")
    field(CALC,"A=1&&B=1&&C=1&&D=1")
}
record(calc,"B_DET_ATOF_M$(M):isOff")
{
    field(SCAN,"1 second")
    field(INPA,"B_DET_ATOF_HV_M$(M)_B:stat")
    field(INPB,"B_DET_ATOF_HV_M$(M)_W:stat")
    field(INPC,"B_DET_ATOF_LV_M$(M)_2V:stat")
    field(INPD,"B_DET_ATOF_LV_M$(M)_4V:stat")
    field(CALC,"A=0&&B=0&&C=0&&D=0")
}
record(calc,"B_DET_ATOF_M$(M):isComm")
{
    field(SCAN,"1 second")
    field(INPA,"B_DET_ATOF_HV_M$(M)_B:stat.STAT")
    field(INPB,"B_DET_ATOF_HV_M$(M)_W:stat.STAT")
    field(INPC,"B_DET_ATOF_LV_M$(M)_2V:stat.STAT")
    field(INPD,"B_DET_ATOF_LV_M$(M)_4V:stat.STAT")
    field(CALC,"A#1&&B#1&&C#1&&D#1")
}
record(calc,"B_DET_ATOF_M$(M):isError")
{
    field(SCAN,"1 second")
    field(INPA,"B_DET_ATOF_HV_M$(M)_B:stat.SEVR")
    field(INPB,"B_DET_ATOF_HV_M$(M)_W:stat.SEVR")
    field(INPC,"B_DET_ATOF_LV_M$(M)_2V:stat.SEVR")
    field(INPD,"B_DET_ATOF_LV_M$(M)_4V:stat.SEVR")
    field(CALC,"A>1||B>1||C>1||D>1")
}

record(seq,"B_DET_ATOF:$(S)") {
    field(LNK1,"B_DET_ATOF_HV_MA:$(S) PP")
    field(LNK2,"B_DET_ATOF_HV_MB:$(S) PP")
    field(DOL1,"1")
    field(DOL2,"1")
}

record(seq,"B_DET_ATOF_MA:$(S)") {
    field(LNK1,"B_DET_ATOF_HV_M0:$(S) PP")
    field(LNK2,"B_DET_ATOF_HV_M1:$(S) PP")
    field(LNK3,"B_DET_ATOF_HV_M2:$(S) PP")
    field(LNK4,"B_DET_ATOF_HV_M3:$(S) PP")
    field(LNK5,"B_DET_ATOF_HV_M4:$(S) PP")
    field(LNK6,"B_DET_ATOF_HV_M5:$(S) PP")
    field(LNK7,"B_DET_ATOF_HV_M6:$(S) PP")
    field(LNK8,"B_DET_ATOF_HV_M7:$(S) PP")
    field(LNK9,"B_DET_ATOF_HV_M8:$(S) PP")
    field(LNKA,"B_DET_ATOF_HV_M9:$(S) PP")
    field(DOL1,"1")
    field(DOL2,"1")
    field(DOL3,"1")
    field(DOL4,"1")
    field(DOL5,"1")
    field(DOL6,"1")
    field(DOL7,"1")
    field(DOL8,"1")
    field(DOL9,"1")
    field(DOLA,"1")
}
record(seq,"B_DET_ATOF_MB:$(S)") {
    field(LNK1,"B_DET_ATOF_HV_M10:$(S) PP")
    field(LNK2,"B_DET_ATOF_HV_M11:$(S) PP")
    field(LNK3,"B_DET_ATOF_HV_M12:$(S) PP")
    field(LNK4,"B_DET_ATOF_HV_M13:$(S) PP")
    field(LNK5,"B_DET_ATOF_HV_M14:$(S) PP")
    field(LNK6,"B_DET_ATOF_HV_M15:$(S) PP")
    field(DOL1,"1")
    field(DOL2,"1")
    field(DOL3,"1")
    field(DOL4,"1")
    field(DOL5,"1")
    field(DOL6,"1")
}

record(calc,"B_DET_ATOF_MA:isOn") {
    field(INPA,"B_DET_ATOF_HV_M0:isOn")
    field(INPB,"B_DET_ATOF_HV_M1:isOn")
    field(INPC,"B_DET_ATOF_HV_M2:isOn")
    field(INPD,"B_DET_ATOF_HV_M3:isOn")
    field(INPE,"B_DET_ATOF_HV_M4:isOn")
    field(INPF,"B_DET_ATOF_HV_M5:isOn")
    field(INPG,"B_DET_ATOF_HV_M6:isOn")
    field(INPH,"B_DET_ATOF_HV_M7:isOn")
    field(INPI,"B_DET_ATOF_HV_M8:isOn")
    field(INPJ,"B_DET_ATOF_HV_M9:isOn")
    field(CALC,"A+B+C+D+E+F+G+H+I+J+K+L==10")
}
record(calc,"B_DET_ATOF_MB:isOn") {
    field(INPA,"B_DET_ATOF_HV_M10:isOn")
    field(INPB,"B_DET_ATOF_HV_M11:isOn")
    field(INPC,"B_DET_ATOF_HV_M12:isOn")
    field(INPD,"B_DET_ATOF_HV_M13:isOn")
    field(INPE,"B_DET_ATOF_HV_M14:isOn")
    field(INPF,"B_DET_ATOF_HV_M15:isOn")
    field(INPG,"B_DET_ATOF_HV_M16:isOn")
    field(INPH,"B_DET_ATOF_HV_M17:isOn")
    field(INPI,"B_DET_ATOF_HV_M18:isOn")
    field(INPJ,"B_DET_ATOF_HV_M19:isOn")
    field(CALC,"A+B+C+D+E+F+G+H+I+J+K+L==10")
}
